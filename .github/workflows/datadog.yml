name: Run Datadog Synthetic tests

on:
  push:
    branches: [ "main" ]
  workflow_dispatch:

jobs:
  synthetic-tests:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Run Datadog tests
        env:
          DATADOG_API_KEY: ${{ secrets.DATADOG_API_KEY }}
          DATADOG_APP_KEY: ${{ secrets.DATADOG_APP_KEY }}
        run: |
          if [ -z "$DATADOG_API_KEY" ] || [ -z "$DATADOG_APP_KEY" ]; then
            echo "Datadog secrets not provided; skipping Synthetic tests."
            exit 0
          fi
          echo "Running Datadog Synthetic tests..."
          # npx @datadog/datadog-ci synthetics run-tests --failOnCriticalErrors
